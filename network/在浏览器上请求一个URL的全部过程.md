# 在浏览器上请求一个URL的全部过程

整个流程如下：

- 域名解析
- 发起TCP的三次握手
- 建立TCP连接后发起http请求
- 服务器响应http请求
- 浏览器解析html代码，并请求html代码中的资源(如js、css、图片等)
- 断开tcp连接
- 浏览器对页面进行渲染呈现给用户

一、域名解析的详细内部过程

![img](photo/20180724170613204)

**例如，要查询www.baidu.com的IP地址（DNS解析url）：**

1、浏览器搜索自己的DNS缓存（维护一张域名与IP地址的对应表）

2、若没有，则搜索操作系统中的DNS缓存（维护一张域名与IP地址的对应表）

3、若没有，则搜索操作系统的hosts文件（Windows环境下，维护一张域名与IP地址的对应表，位置一般在 C:\Windows\System32\drivers\etc\hosts）

4、若没有，则操作系统将域名发送至 **本地域名服务器- -**（递归查询方式），**本地域名服务器 查询自己的DNS缓存**，查找成功则返回结果，否则，（以下是迭代查询方式）

​		4.1 **本地域名服务器** 向根域名服务器（其虽然没有每个域名的具体信息，但存储了				负责每个域，如com、net、org等的解析的顶级域名服务器的地址）发起请				求，此处，根域名服务器返回com域的顶级域名服务器的地址